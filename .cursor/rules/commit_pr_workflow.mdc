---
description: git commit and PR content
alwaysApply: false
---
# Git Workflow & PR Standards

This rule defines the complete workflow for branch management, commits, and pull requests using Graphite for stacked PRs.

## ğŸŒ¿ Branch Management

### Branch Naming Convention
```
<type>: <brief-description> #<issue-number>
```

**Examples:**
- `feat: add user authentication system #123`
- `fix: resolve mobile navigation overflow #156`
- `refactor: extract database helpers #189`
- `docs: update API documentation #234`

### Workflow Steps
1. **Create Feature Branch**: Start from main branch
2. **Use Graphite**: For stacked PRs and better branch management
3. **Regular Commits**: Make atomic commits with clear messages
4. **Pre-Commit Validation**: Run all checks before committing (see below)
5. **Push & Create PR**: After feature completion

## âœ… Pre-Commit Validation Checklist

**MANDATORY: Run these commands before every commit:**

### ğŸ§ª Testing
```bash
# Run all tests - MUST pass 100%
npm test

### ğŸ” Code Quality
```bash
# Check for linting errors - MUST pass
npm run lint

# Check TypeScript compilation - MUST pass
npm run build

# Verify no runtime errors
npm run start  # Test locally if significant changes
```

### ğŸ“Š Coverage & Performance
```bash
# Check test coverage (aim for >90%)
npm test -- --coverage

# Verify bundle size (check for significant increases)
npm run build && du -sh .next/static/
```

### ğŸ”§ Pre-Commit Command Sequence
```bash
# Complete validation sequence
npm test && npm run lint && npm run build
```

**âš ï¸ COMMIT ONLY IF ALL CHECKS PASS**

## ğŸ“ Commit Message Standards

### Format
```
<type>(optional-scope): <description> #<issue-number>
```

### Commit Types
- **feat**: New feature implementation
- **fix**: Bug fixes
- **refactor**: Code restructuring without functionality changes
- **chore**: Maintenance tasks (dependencies, build, etc.)
- **docs**: Documentation updates
- **test**: Test additions or modifications
- **style**: Code formatting, linting fixes

### Examples
```bash
feat(auth): add email input validation #145
fix(ui): prevent token expiration crash #151
refactor(search): extract ranking algorithm to utils #142
chore: update Next.js to version 15.4.6 #159
docs(readme): add environment setup guide #168
test(admin): add review management test suite #173
```

## ğŸ¯ Pull Request Standards

### PR Title Format
```
<type>(scope): <brief-description> #<issue-number>
```

**Examples:**
- `feat(auth): add email verification flow #234`
- `fix(ui): resolve mobile navigation overflow #189`
- `refactor(api): extract user validation logic #156`

### PR Description Template

```markdown
## ğŸ“‹ Summary
<!-- Brief description of what this PR does and why it's needed -->

## ğŸ”— Related Issue
Closes #[issue-number]

## ğŸš€ Changes Made
<!-- List the main changes/additions -->
- 
- 
- 

## ğŸ§ª Testing
### What was tested:
- [ ] Unit tests pass
- [ ] Integration tests pass
- [ ] Manual testing completed
- [ ] Mobile responsiveness verified
- [ ] Edge cases tested

### Test Screenshots/Evidence:
<!-- Add screenshots showing the feature working -->
<!-- Include before/after comparisons if applicable -->

## ğŸ“š Documentation
<!-- List any documentation updates needed or completed -->
```

## ğŸ” Testing Evidence Requirements

### Terminal Output
```bash
# Always include test results
npm test
npm run build
npm run lint
```

### Coverage Reports
- Include coverage percentage changes
- Highlight any coverage improvements
- Explain any coverage decreases

### Performance Metrics
- Bundle size changes
- Load time improvements/regressions
- Database query performance (if applicable)

## ğŸ¤– AI Assistant Reminders

**After creating PR content, remind the user to add:**

### For UI Changes:
- [ ] Desktop screenshot (primary functionality)
- [ ] Mobile screenshot (responsive design)
- [ ] Empty state screenshot
- [ ] Error state screenshot
- [ ] Loading state screenshot (if applicable)

### For API Changes:
- [ ] API response examples
- [ ] Error handling examples
- [ ] Performance benchmarks

### For Database Changes:
- [ ] Migration test results
- [ ] Data integrity verification
- [ ] Performance impact analysis

## ğŸ“‹ PR Review Checklist

### Before Submitting
- [ ] All tests passing
- [ ] No linting errors
- [ ] Screenshots added (for UI changes)
- [ ] Documentation updated
- [ ] Issue linked correctly
- [ ] Breaking changes documented

### Self-Review
- [ ] Code follows project conventions
- [ ] No debugging code left behind
- [ ] Proper error handling implemented
- [ ] Performance considerations addressed
- [ ] Accessibility requirements met

## ğŸ”„ Graphite Integration

### Stacked PRs
- Use Graphite CLI for managing stacked PRs
- Each PR should be atomic and independently reviewable
- Maintain clear dependency relationships between stacks

### Commands Reference
```bash
gt branch create <branch-name>
gt stack submit
gt branch checkout <branch-name>
```

---

**Remember**: Quality PRs save review time and reduce deployment risks. Take time to create comprehensive, well-documented PRs with proper evidence.